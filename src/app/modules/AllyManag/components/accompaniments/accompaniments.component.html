<div class="compenetsstyle px-5 pt-5 " style="background-color: #e9e7e7;">

    <form novalidate="" class="row">
        <div style="width: 5%;" class="d-flex align-items-center">
            <a (click)="goBackCreateDish()"  class="d-flex">
                <img src="assets/icons/Back.png" class="tifi-icon-back">
            </a>
        </div>

        <section class="col-11">
            <div class="filerControl px-1">

                <section class="col-4 overflow-auto mr-1" style="flex-direction: column;">
                    <nav class="navbar navbar-expand-sm navbar-light bg-light overflow-auto">
                        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                            <li *ngFor="let section of sections" class="nav-item">
                                <button class="mr-2 btn btn-outline-primary"
                                    (click)="seeValue(section.name,section.id)">{{section.name}}</button>
                            </li>
                        </ul>
                    </nav>
                    <div class="form-group">
                        <div class="input-group mt-2">
                            <div class="inputWithIcon mr-2">
                                <input class="form-control" type="text" placeholder="Selecciona la categoría" #new
                                    value="{{sectionSelected}}" name="new">
                                <i class="far fa-edit" aria-hidden="true"></i>
                            </div>
                            <button class="btn1 btn btn-outline-primary mr-2" (click)="deleteSection()">
                                Borrar
                            </button>
                            <button class="btn1 btn btn-outline-primary" (click)="updateSection(new.value)">
                                Guardar cambios
                            </button>
                        </div>
                    </div>
                </section>

                <section class="col-4 overflow-auto mr-1" style="flex-direction: column;">
                    <nav class="navbar navbar-expand-sm navbar-light bg-light">
                        <ul class="navbar-nav mr-auto mt-2 mt-lg-0 container-fluid d-flex">
                            <li class="nav-item container-fluid d-flex">
                                <input class="form-control text-center" id="general" type="text"
                                    placeholder="Buscar acompañamiento ..." #general>
                            </li><!-- (keyup)="searchbyterm(general.value)" -->
                        </ul>
                    </nav>
                    <div class="form-group">
                        <div class="input-group mt-3" style="justify-content: center;">
                            <div class="radio radio-success m-2 form-check form-check-inline">
                                <input class="form-check-input " type="radio" checked >
                                <label style="font-size: 15px;">
                                    Activo
                                </label>
                            </div>
                            <div class="radio radio-danger m-2 form-check form-check-inline">
                                <input class="form-check-input" type="radio" checked>
                                <label style="font-size: 15px;" >
                                    Inactivo
                                </label>
                            </div>
                            <!-- <div class="radio m-2 form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="radio2" id="radio5">
                                <label for="radio5">
                                    Eliminar
                                </label>
                            </div> -->
                        </div>
                    </div>
                </section>

                <section class="col-4 overflow-auto">
                    <nav class="navbar navbar-expand-sm navbar-light bg-light overflow-auto">
                        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                            <li class="nav-item">
                                <input style="width: 100%;" class="form-control text-center" id="general"
                                    [(ngModel)]="otherSection" type="text" name="otherSection" type="text"
                                    placeholder="Nueva sección"></li>
                            <li class="nav-item">
                                <button class="btn btn-outline-primary ml-2" (click)="addSection(otherSection)">Añadir
                                    nueva sección</button>
                            </li>
                        </ul>
                    </nav>
                    <!-- <div class="form-group">
                        <div class="input-group mt-2">
                            <p class="mr-2">Personalización del <br>nombre de la sección</p>
                                <select *ngIf="arrayCategorySelect" class="form-control mr-2" >
                                    <option>
                                        hi
                                    </option>
                                </select>
                                <input *ngIf="otherCategoryInput">
                                <button *ngIf="selectAgainarray" class="btn1 btn btn-outline-primary" type="button"
                                (click)="handleBoxOther()"> Cancelar</button>
    
                            <button *ngIf="selectAgainarray" class="btn1 btn btn-outline-primary" type="button"
                                (click)="addCategory(otherCat)"> Guardar</button>
                            <button *ngIf="addcategoryButton" class="btn1 btn btn-outline-primary mr-2" (click)="handleBoxOther()">
                                Otro
                            </button>
                        </div>
                    </div> -->
                </section>
            </div>
        </section>
    </form>

    <section class="col-12 " [formGroup]="addForm">
        <div class="form-group tableFixHead mt-5">
            <table>
                <thead>
                    <tr>
                        <th class="text-center">Cantidad</th>
                        <th class="text-center">Unidad</th>
                        <th class="text-center">Acompañamiento</th>
                        <th class="text-center">Sección</th>
                        <th class="text-center">Costo</th>
                        <th class="text-center" colspan="2">T. de preparación</th>
                        <th class="text-center">Precio</th>
                        <th class="text-center">F. creación</th>
                        <th class="text-center">F. modificación</th>
                        <th class="text-center" colspan="2">Estado</th>
                        <th class="text-center">Eliminar</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let row of addForm.get('rows')?.controls;let index = index;">
                        <td><input class="text-center" [formControl]="row.get('quantity')">
                            <!-- [ngClass]="{ 'is-invalid': (!row.get('quantity').valid && 
                            row.get('quantity').touched ),'is-valid':(row.get('quantity').valid )}"
                                <div *ngIf="row.get('quantity').errors?.required " class="invalid-feedback">
                                Este campo es requerido
                            </div>
                            <div *ngIf="row.get('quantity').errors?.minlength " class="invalid-feedback">
                                Como mínimo 2 caracteres
                            </div>
                            <div class="valid-feedback">Ok!</div> -->
                        </td>
                        <td><input class="text-center" [formControl]="row.get('unitMeasurement')"></td>
                        <td><input class="text-center" [formControl]="row.get('name')"></td>
                        <td>
                            <!-- [value]="section.id" [formControl]="row.get('idTypeSection')" -->
                            <select [formControl]="row.get('nameTypeSection')" class="input-group-text">
                                <option *ngFor="let section of sections" >
                                    {{section.name}}
                                </option>
                            </select>
                        </td>
                        <td><input class="text-center" [formControl]="row.get('typeOfAccompaniment')" type="checkbox" [value]="withCost"
                                (change)="check($event)"  ></td>
                        <td><input class="text-center"  [formControl]="row.get('preparationTime')"></td>
                        <td> <select
                             [formControl]="row.get('preparationTime')" class="input-group-text">
                                <option *ngFor="let time of time">
                                    {{time}}
                                </option>
                            </select> </td>
                        <td><input class="text-center" [formControl]="row.get('accompanimentValue')"></td>
                        <td><input disabled class="text-center" value={{date}}></td>
                        <td><input disabled [formControl]="row.get('name')"></td>
                        <td><div class="radio radio-success m-2  form-check-inline">
                            <input (change)="checkActive($event,active.value)" [value]="states"
                            [formControl]="row.get('state')"
                            #active value="active" type="radio" name={{index}} id="state">
                            <label  style="font-size: 15px;">
                                Activo
                            </label>
                        </div>
                        <td><div class="radio radio-danger m-2 form-check-inline">
                            <input (change)="checkInactive($event,inactive.value)" [value]="stateI"
                            [formControl]="row.get('state')"
                            #inactive value="inactive" type="radio" name={{index}} id="state" >
                            <label style="font-size: 15px;" >
                                Inactivo
                            </label>
                        </div></td>
                        <td> <a (click)="onRemoveRow(index)"><i class="fas fa-trash"></i></a></td>
                    </tr>
                </tbody>
            </table>

            <label class="label-control">Items</label>
            <br>
            <label class="switch">
                <input type="checkbox" class="form-control" formControlName="items">
                <span class="slider round">
                    <span class="on">
                        {{addForm.value.items_value}}
                    </span>
                    <span class="off">
                        {{addForm.value.items_value}}
                    </span>
                </span>
            </label>
        </div>
    </section>

    <section class="col-12 d-flex mt-4 form-group">
        <div class="col-md-4 col-sm-5 d-flex" style="justify-content:center;">
            <button class="btn btn-outline-primary btn-lg">No hay acompañamientos</button>
        </div>
        <div class="col-md-4 col-sm-5 d-flex" style="justify-content:center;">
            <button (click)="onAddRow()" *ngIf="addForm.get('rows')" class="btn btn-outline-primary btn-lg">
                Nuevo acompañamiento</button>
        </div>
        <div class="col-md-4 col-sm-12 d-flex" style="justify-content:center;">
            <button class="btn btn-outline-primary btn-lg">Guardar</button>
        </div>
    </section>
    <pre>{{rows.value | json}}</pre>
</div>

 